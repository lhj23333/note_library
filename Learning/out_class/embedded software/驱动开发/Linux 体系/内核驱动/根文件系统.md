---
share_link: https://share.note.sx/kao8n44o#IKU4sJs2gbSDaJBsnl7dAJ2wKT1hOnzz6CSElCX2xNE
share_updated: 2025-03-04T14:38:29+08:00
---
### 1. Linux 系统启动流程：

> [!NOTE] `/boot` 目录内容及作用
> - `/boot` 目录：`Linux` 系统的引导目录，主要存放引导加载程序 `Bootloader` 以及内核相关文件，以用于系统启动
> 	- 存放 `Linux` 内核（如 `vmlinuz`）
> 	- 存放引导加载程序 （如 `GRUB`），用于引导系统
> 	- 存放 `initramfs/initrd`（临时根文件系统），用于初始化硬件和挂载真正的根文件系统
> 	- 存放系统启动时所需的其他配置文件
> 	  
> 一般来说，`/boot` 目录是单独的分区，即使根文件系统损坏，系统仍可以进行引导。

- 引导加载程序 `Bootloader（GRUB）` 加载 `Linux` 内核：
	- 从 `/boot` 目录加载 `vmlinuz`（`linux` 内核）
	- 内核解压并初始化内核空间，准备系统环境
	- 加载 `initramfs` 并解压到 `RAM` (内存) 中
- 内核挂载 `initramfs` 作为临时根文件系统
	- 运行 `initramfs` 内部的 `init` 脚本进行内核初始化 (通常是 `/init`)
		- 进行系统基本配置（挂载其他文件系统、配置网络、启动服务）
		- 通过 `udev` 识别硬件，加载必要的驱动程序（如存储、文件系统，RAID 等）
	- 解析 `etc/fstab` 找到真正的根文件系统
- 切换到真正的根文件系统
	- 通过 `switch_root` 进入新的根文件系统
- 运行 `/sbin/init` 作为系统的第一个进程，启动用户空间
	- 加载服务并完成系统启动

### 2. 根文件系统：

- 根文件系统首先是一种文件系统，所以其本身就具有普通文件系统的存储数据文件的功能，其特殊之处在于，它是内核启动时所挂载的第一个文件系统（临时根系统文件 `initramfs` 也属于根系统文件）
- 系统引导启动程序会在根文件系统挂载后从中把一些初始化脚本以及配置服务程序加载到内存中运行，里面包含了 `Linux` 系统能够运行所必需的应用程序，库等。
- 其内包含有以下等功能目录：
- **临时根系统文件：**

|      目录/文件      |                       作用                       |
| :-------------: | :--------------------------------------------: |
|     `/init`     |        **主启动脚本**，完成 `initramfs` 内的初始化任务        |
|     `/bin`      |      **基本命令**（`sh`、`ls`、`mount`、`cpio` 等）      |
|     `/sbin`     | **系统管理工具**（`udevadm`、`modprobe`、`switch_root`） |
|     `/lib`      | **共享库**（C 语言运行库 `libc.so`，动态链接器 `ld-linux.so`） |
| `/lib/modules/` |                **内核模块**（设备驱动程序）                |
|     `/dev`      |        **设备文件**（`sda`、`console`、`null`）        |
|     `/proc`     |        **虚拟进程信息**（`cpuinfo`、`meminfo`）         |
|     `/sys`      |              **系统信息**（挂载 `sysfs`）              |

- **根系统文件顶层目录结构：**

<div style = "text-align: center;">
<img src = "https://obsidian-picgo-1331635585.cos.ap-guangzhou.myqcloud.com/PicGo_pictures/20250304143218356.png" width = "450px"/>
</div>

---

- 所有的系统命令、系统配置以及其他文件系统的挂载点都位于这个根文件系统
- 根文件系统通过存放于内存和 `Flash` 中，或是基于网络的文件系统。根文件系统通常存放嵌入式系统使用到的所有应用程序、库以及用到的服务等
- 通用的 Linux 系统的根文件系统中会包括根文件系统目录结构体中的所有目录，在嵌入式系统中，通常需要精简根文件系统。部分可以被忽略的目录如下

<div style = "text-align: center;">
<img src = "https://obsidian-picgo-1331635585.cos.ap-guangzhou.myqcloud.com/PicGo_pictures/20250304143528291.png" width = "450px"/>
</div>

